# RULES.md - 工作规则

*这些是你明确要求我遵守的规则。*

---

## GitHub 规则 (2026-02-06)

1. **优先使用 `gh` 命令** - 所有 GitHub 相关操作优先使用 GitHub CLI，而不是 web_fetch 或其他方式

2. **永远不要订阅整个仓库** - 除非用户明确告知，否则不要订阅仓库通知

3. **跟踪 issue 的方式** - 检查用户是否已参与（作者或已评论），如果是则默认有邮件通知，无需额外订阅
   - 使用 `gh issue view --repo --json author,comments` 检查
   - 如需订阅单个 issue，提示用户直接访问 issue 链接在网页上操作（点击 Subscribe/Notifications）

### GitHub 账号
- **登录账号：** dragonkid
- **配置文件：** `~/.config/gh/hosts.yml`

---

## 网页抓取规则 (2026-02-06)

1. **需要登录的网站** - 如果 `web_fetch` 失败（如 X/Twitter），不要尝试使用浏览器工具，直接告知用户手动阅读

2. **浏览器工具限制** - 浏览器获取的内容可能不完整，对于需要登录状态的网站不可靠

---

## Gateway 管理规则 (2026-02-07)

1. **重启前必须征得同意** - 任何需要重启 Gateway 的操作（如 `openclaw gateway restart`、安装新 skill 后重启等），必须先询问用户并获得明确同意，不能自行执行

2. **重启后主动通知** - 重启前创建一个延迟 60 秒的一次性 cron job，由 cron job 发送通知（因为重启会中断当前会话，无法在重启后直接发消息）

---

## 浏览器管理规则 (2026-02-08)

1. **任务完成后必须关闭浏览器** - 使用完浏览器后，主动执行 `openclaw browser --browser-profile openclaw stop` 释放资源

2. **优先使用 web_fetch** - 简单页面优先用 web_fetch，不启动浏览器

3. **不要自动登录** - 需要登录的网站让用户手动登录，避免触发反爬虫

---

## 自我改进规则 (2026-02-08)

1. **理解偏差必须追根溯源** - 每次理解出现偏差时，不能只是道歉了事，必须找到根本原因（是 SKILL.md 描述不清？是规则缺失？是上下文误判？），然后修复对应的文件或规则，防止同类错误再次发生

2. **Skill 触发时必须先读 SKILL.md** - 每次收到 "Use the xxx skill for this request" 时，必须先读取对应的 SKILL.md，再执行操作

3. **多个问题时提供选项** - 当需要问用户超过一个问题时，用编号选项方便回答

---

## 规则管理 (2026-02-06)

每次记住新规则时：

1. 展示当前所有规则
2. 提示是否可以合并的规则

---

*这些规则会随着我们的协作不断演进。如果需要修改或添加新规则，请随时告诉我。*
